<html><head><meta charset="UTF-8" /><style>/*Author:sawa.The default design */*{box-sizing:border-box;-webkit-user-select:text;-khtml-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;}body,table{font-family:sans-serif;font-size:12px;}body{margin:0;display:flex;flex-wrap:nowrap;align-items:stretch;flex-direction:row;height:100%;text-align:justify;text-rendering:optimizelegibility;color:hsl(100,0%,30%);background-color:hsl(0,0%,100%);word-break:normal;}#top,#top-title{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;font-size:18px;}#top *{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}#top,#user #top-title{padding:2;background-color:hsl(0,0%,97%);color:hsl(0,0%,30%);}#dev #top-title{margin:1em;color:white;}#user #top-title,#dev #top{border-bottom:solid 6px hsl(211,85%,29%);}#top >span{margin-left:5;margin-right:5;display:inline-flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:center;white-space:pre;padding-top:4;padding-bottom:4;}.separator{font-size:18px;color:hsl(60,5%,72%);margin-left:0.5em;margin-right:0.5em;}#left{padding:0 20 24 40;flex-basis:480px;flex-shrink:0;display:flex;flex-wrap:nowrap;align-items:stretch;flex-direction:column;border-right:solid 1px hsl(60,5%,68%);background-color:#4F6B89;color:hsl(0,0%,100%);}#left .tablewrapper{max-height:32%;overflow-y:auto;border-top:solid 1px hsl(60,5%,85%);border-bottom:solid 1px hsl(60,5%,85%);}#left table{margin:0;width:100%;background-color:hsl(0,0%,100%);}#gemspec td:nth-child(1){white-space:nowrap;}#gemspec td:nth-child(2){word-break:break-all;}#files td:nth-child(3),#files td:nth-child(4){white-space:nowrap;}#files td:nth-child(4){text-align:right;}#right{display:flex;flex-wrap:nowrap;align-items:stretch;flex-direction:column;overflow:hidden;flex-grow:1;}#main{flex-basis:0;flex-grow:1;display:flex;flex-wrap:nowrap;align-items:stretch;flex-direction:column;overflow-y:auto;}#user #main{padding-top:12;padding-bottom:12;padding-right:240;padding-left:240;}#dev #main{padding-top:12;padding-bottom:12;padding-right:40;padding-left:20;}#main:before{position:fixed;margin-top:20px;margin-left:-20px;content:"\25B8";/*blacktriangleright */}#user #main:before{top:234;}#dev #main:before{top:300;}[onclick]:not([folded]){cursor:pointer;}[onclick][folded="true"]{cursor:s-resize;}[onclick][folded="false"]{cursor:n-resize;}table{border-collapse:collapse;margin-top:1em;margin-bottom:1em;}tr{border-color:hsl(60,27%,78%);border-style:solid;}#left tr:first-of-type{border-left-width:1px;border-right-width:1px;border-top-width:0;border-bottom-width:1px;}#left tr:last-of-type{border-left-width:1px;border-right-width:1px;border-top-width:1px;border-bottom-width:0;}#main tr,#left tr:not(:last-of-type):not(:first-of-type){border-left-width:1px;border-right-width:1px;border-top-width:1px;border-bottom-width:1px;}td{padding-left:3px;padding-right:3px;border-style:solid;border-color:hsl(60,27%,78%);border-width:1px;}figure{text-align:center;margin-left:0;margin-right:0;}figcaption{text-align:center;margin:2;}input{vertical-align:middle;}h1,h2,h3,h4{display:flex;flex-direction:row;align-items:center;white-space:pre-wrap;word-break:break-word;font-weight:normal;/*color:hsl(180,93%,6%);*/}h1{color:hsl(9,30%,15%);}h2{font-size:163%;margin-left:1em;margin-right:0.5em;color:hsl(9,30%,15%);}h3{font-size:140%;margin-left:1em;margin-right:0.5em;padding-left:1em;border-bottom:solid 1px hsl(0,0%,80%);color:hsl(9,30%,15%);}h4{font-size:120%;margin-left:1em;margin-right:0.5em;padding-left:2em;border-bottom:solid 1px hsl(0,0%,80%);font-style:oblique;color:hsl(9,30%,15%);}h5{font-size:110%;margin-left:1em;margin-right:0.5em;padding-left:3em;border-bottom:solid 1px hsl(0,0%,80%);color:hsl(9,30%,15%);}h6{font-size:100%;margin-left:1em;margin-right:0.5em;padding-left:4em;border-bottom:solid 1px hsl(0,0%,80%);color:hsl(9,30%,15%);}.module-header{/*Margin among `h2.module-header`does not collapse because of extra embedding level `.margin`.Hence margin needs to be set to half of other `h2`.*/margin-top:0.415em;margin-bottom:0.415em;}.feature:not(:first-child)[onclick]:hover{background-color:hsl(90,10%,97%);}.feature-name{font-size:110%;font-weight:bold;font-family:sans-serif;}[folded="true"]>h1,[folded="true"]>h2,[folded="true"]>h3,[folded="true"]>h4,[folded="true"]>h5,[folded="true"]>h6{box-shadow:inset 0px -21px 46px -26px hsla(0,0%,0%,0.2);}.feature-contents{padding-left:1em;}.head{font-weight:bold;font-family:sans-serif;font-size:15px;}.user-item,.dev-item{margin-top:1;margin-bottom:1;padding-left:0.5em;padding-right:0.5em;border-radius:5px;}#dev .user-item{background-color:hsl(180,20%,86%);padding-top:0.1px;padding-bottom:0.1px;}.diagram{text-align:left;margin:0.75em 2em;}.mixins{display:inline-block;margin:2 1;background-color:#c2ccd5;border:solid 1px #246a7d;color:#246a7d;padding:1 4;border-radius:2px;font-size:10.5px;}.mixins >div{width:100%;text-align:center;line-height:2.55ex;}.mixins >.baseline ~div{float:left;clear:both;}.p,li{font-family:serif;font-size:17px;}.p{margin-top:1em;margin-bottom:1em;}.CodeRay,table,figure{margin-top:1.33em;margin-bottom:1.33em;margin-left:2em;margin-right:2em;}.dev-text,table{font-family:sans-serif;font-size:13px;}.CodeRay{overflow-x:auto;}.CodeRay,code{font-size:12px;}.inline{padding:3px 4px;line-height:2.5ex;border-radius:0.4ex;white-space:pre-wrap;font-size:12px;background-color:hsl(50,35%,89%);color:hsl(0,0%,40%);word-break:break-all;}li{margin-top:5;margin-bottom:5;}.indent{padding-left:2.3em;}.hang-indent{margin-right:-2.3em;}.statistics{font-size:12px;}#current{color:black;font-weight:bold;}.navigation{display:inline-flex;flex-direction:row;align-items:center;}.mode.tag,.arrow.tag,.missing_doc.tag,.navigation .bad_doc.tag,.agenda.tag,.log.tag,.missing_test.tag,.bad_test.tag,.untestable.tag,.bug.tag,.success.tag,.benchmark.tag{display:inline-flex;flex-direction:row;align-items:center;justify-content:center;white-space:pre;height:18px;margin:2 0;padding-left:5.5;padding-right:5.5;font-family:sans-serif;font-size:10px;font-weight:500;border-radius:9px;}.unimplemented.tag,.protected.tag,.private.tag,.public.tag,.constant.tag,.singleton.tag,.instance.tag,.undocumented.tag,.hidden.tag,.misplaced.tag,.moved.tag{display:inline-flex;flex-direction:row;align-items:center;justify-content:center;white-space:pre;height:18px;margin:2 0;padding-left:5.5;padding-right:5.5;font-family:sans-serif;font-size:10px;font-weight:500;border-radius:2px;}.tag.mode,.tag.arrow{color:hsl(9,69%,16%);vertical-align:middle;line-height:100%;font-size:12px;}.constant{color:#DB7551;}.constant.tag{background-color:#DB7551;color:white;}.singleton{color:#68894F;}.singleton.tag{background-color:#68894F;color:white;}.instance{color:#4F6589;}.instance.tag{background-color:#4F6589;color:white;}.public{color:#090705;}.public.tag{background-color:#CCBBA7;border:solid 1px;}.private{color:#090705;}.private.tag{background-color:#9B7C59;border:solid 1px;}.protected{color:#D6AF86;}.protected.tag{background-color:#47160D;border:solid 1px;}.hidden,.moved{color:gray;}.hidden.tag,.moved.tag{background-color:white;color:#878787;border:solid 1px;}.agenda{color:#878787;}.agenda.tag{background-color:#878787;color:white;}.log{color:#878787;}.log.tag{background-color:white;color:#878787;border:solid 1px;}.undocumented,.misplaced,.missing_doc,.bad_doc,.missing_test,.bad_test{color:#F79833;}.navigation .bad_doc{font-weight:inherit;text-decoration:inherit;}.anchor .bad_doc{font-weight:bold;border-bottom:dotted 2px;}.undocumented.tag,.misplaced.tag,.missing_doc.tag,.navigation .bad_doc.tag,.missing_test.tag,.bad_test.tag{background-color:#F79833;color:white;}.untestable{color:hsl(54,43%,38%);}.untestable.tag{background-color:hsl(54,43%,38%);color:white;}.unimplemented,.bug{color:hsl(0,80%,50%);}.unimplemented.tag,.bug.tag{background-color:hsl(0,80%,50%);color:white;}.success{color:#00a15a;}.success.tag{background-color:#00a15a;color:white;}.backtrace col:nth-child(1){width:100%;}.backtrace td:nth-child(2)>code{white-space:nowrap;}.benchmark{color:hsl(263,43%,38%);}.benchmark.tag{background-color:hsl(263,43%,38%);color:white;}.barcharts{border-collapse:separate;border-spacing:3 0;}.barcharts col:nth-child(2){width:100%;}.barcharts td:nth-child(1)>code{float:right;font-size:73%;white-space:nowrap;}.barcharts td:nth-child(2){padding:3 0;background-color:hsl(250,7%,92%);}caption{margin:4;}.barchart{display:flex;flex-wrap:nowrap;align-items:stretch;flex-direction:row;height:21px;}.barchart .fill{padding:0 6;background-color:hsl(240,40%,50%);min-width:1;color:hsl(0,0%,63%);font-family:sans-serif;font-size:75%;text-align:right;white-space:nowrap;overflow:visible;line-height:21px;}.barchart .minedge{background-color:hsl(0,50%,50%);border-style:solid;border-left-width:0;border-right-width:0;border-top-width:5px;border-bottom-width:5px;border-color:hsl(240,40%,50%);width:1px;}.barchart .maxedge{background-color:hsl(0,50%,50%);border-style:solid;border-left-width:0;border-right-width:0;border-top-width:5px;border-bottom-width:5px;border-color:hsl(250,7%,92%);width:1px;}.barchart .min{background-color:hsl(0,50%,50%);border-style:solid;border-left-width:0;border-right-width:0;border-top-width:10px;border-bottom-width:10px;border-color:hsl(240,40%,50%);}.barchart .max{background-color:hsl(0,50%,50%);border-style:solid;border-left-width:0;border-right-width:0;border-top-width:10px;border-bottom-width:10px;border-color:hsl(250,7%,92%);}.verification{color:hsl(180,61%,50%);}.gray{color:darkgray;}.right{float:right;}.clear{clear:both;}/*Terminal decorations*/.italic{font-style:italic;}.bold{font-weight:bold;}.underline{text-decoration:underline;}.black{color:#000000;}.red{color:#c75646;}.green{color:#8eb33b;}.yellow{color:#d0b03c;}.blue{color:#72b3cc;}.magenta{color:#c8a0d1;}.cyan{color:#218693;}.white{color:#b0b0b0;}.bg-black{background-color:#5d5d5d;}.bg-red{background-color:#e09690;}.bg-green{background-color:#cdee69;}.bg-yellow{background-color:#ffe337;}.bg-blue{background-color:#9cd9f0;}.bg-magenta{background-color:#fbb1f9;}.bg-cyan{background-color:#77dfd8;}.bg-white{background-color:#f7f7f7;}</style><style>.CodeRay {background-color:#FFF;border:1px solid #CCC;font-family:Monaco,"Courier New","DejaVu Sans Mono","Bitstream Vera Sans Mono",monospace;color:#000;padding:1em 0px 1em 1em;}.CodeRay pre {margin:0px;}div.CodeRay {}span.CodeRay {white-space:pre;border:0px;padding:2px }table.CodeRay {border-collapse:collapse;width:100%;padding:2px }table.CodeRay td {padding:1em 0.5em;vertical-align:top;}.CodeRay .line-numbers,.CodeRay .no {background-color:#ECECEC;color:#AAA;text-align:right;}.CodeRay .line-numbers a {color:#AAA;}.CodeRay .line-numbers tt {font-weight:bold }.CodeRay .line-numbers .highlighted {color:red }.CodeRay .line {display:block;float:left;width:100%;}.CodeRay span.line-numbers {padding:0px 4px }.CodeRay .code {width:100%}ol.CodeRay {font-size:10pt }ol.CodeRay li {white-space:pre }.CodeRay .code pre {overflow:auto }.CodeRay .debug {color:white !important;background:blue !important;}.CodeRay .annotation {color:#007 }.CodeRay .attribute-name {color:#f08 }.CodeRay .attribute-value {color:#700 }.CodeRay .binary {color:#509;font-weight:bold }.CodeRay .comment {color:#998;font-style:italic;}.CodeRay .char {color:#04D }.CodeRay .char .content {color:#04D }.CodeRay .char .delimiter {color:#039 }.CodeRay .class {color:#458;font-weight:bold }.CodeRay .complex {color:#A08;font-weight:bold }.CodeRay .constant {color:teal;}.CodeRay .color {color:#0A0 }.CodeRay .class-variable {color:#369 }.CodeRay .decorator {color:#B0B;}.CodeRay .definition {color:#099;font-weight:bold }.CodeRay .directive {color:#088;font-weight:bold }.CodeRay .delimiter {color:black }.CodeRay .doc {color:#970 }.CodeRay .doctype {color:#34b }.CodeRay .doc-string {color:#D42;font-weight:bold }.CodeRay .escape {color:#666;font-weight:bold }.CodeRay .entity {color:#800;font-weight:bold }.CodeRay .error {color:#F00;background-color:#FAA }.CodeRay .exception {color:#C00;font-weight:bold }.CodeRay .filename {color:#099;}.CodeRay .function {color:#900;font-weight:bold }.CodeRay .global-variable {color:teal;font-weight:bold }.CodeRay .hex {color:#058;font-weight:bold }.CodeRay .integer {color:#099;}.CodeRay .include {color:#B44;font-weight:bold }.CodeRay .inline {color:black }.CodeRay .inline .inline {background:#ccc }.CodeRay .inline .inline .inline {background:#bbb }.CodeRay .inline .inline-delimiter {color:#D14;}.CodeRay .inline-delimiter {color:#D14;}.CodeRay .important {color:#f00;}.CodeRay .interpreted {color:#B2B;font-weight:bold }.CodeRay .instance-variable {color:teal }.CodeRay .label {color:#970;font-weight:bold }.CodeRay .local-variable {color:#963 }.CodeRay .octal {color:#40E;font-weight:bold }.CodeRay .operator {}.CodeRay .predefined-constant {font-weight:bold }.CodeRay .predefined {color:#369;font-weight:bold }.CodeRay .preprocessor {color:#579;}.CodeRay .pseudo-class {color:#00C;font-weight:bold }.CodeRay .predefined-type {color:#074;font-weight:bold }.CodeRay .reserved,.keyword {color:#000;font-weight:bold }.CodeRay .key {color:#808;}.CodeRay .key .delimiter {color:#606;}.CodeRay .key .char {color:#80f;}.CodeRay .value {color:#088;}.CodeRay .regexp {background-color:#fff0ff }.CodeRay .regexp .content {color:#808 }.CodeRay .regexp .delimiter {color:#404 }.CodeRay .regexp .modifier {color:#C2C }.CodeRay .regexp .function {color:#404;font-weight:bold }.CodeRay .string {color:#D20;}.CodeRay .string .string {}.CodeRay .string .string .string {background-color:#ffd0d0 }.CodeRay .string .content {color:#D14;}.CodeRay .string .char {color:#D14;}.CodeRay .string .delimiter {color:#D14;}.CodeRay .shell {color:#D14 }.CodeRay .shell .content {}.CodeRay .shell .delimiter {color:#D14 }.CodeRay .symbol {color:#990073 }.CodeRay .symbol .content {color:#A60 }.CodeRay .symbol .delimiter {color:#630 }.CodeRay .tag {color:#070 }.CodeRay .tag-special {color:#D70;font-weight:bold }.CodeRay .type {color:#339;font-weight:bold }.CodeRay .variable {color:#036 }.CodeRay .insert {background:#afa;}.CodeRay .delete {background:#faa;}.CodeRay .change {color:#aaf;background:#007;}.CodeRay .head {color:#f8f;background:#505 }.CodeRay .insert .insert {color:#080;font-weight:bold }.CodeRay .delete .delete {color:#800;font-weight:bold }.CodeRay .change .change {color:#66f;}.CodeRay .head .head {color:#f4f;}</style><title>dom User&apos;s Manual</title></head><body id="user"><div id="right"><div id="top"><span class="navigation"><span class="tag mode" onclick="displayMode(true, true)">Modules</span><span class="tag mode" onclick="displayMode(false, true)">Features</span><span class="tag mode" onclick="displayMode(false, false)">Full</span></span><span class="separator">│</span><span class="navigation"><span class="tag private" onclick="toggleFeatures(this, 'private', 'user-feature-navigation1')">private</span> <span class="private" id="tagsum-private">1</span> <span class="tag public" onclick="toggleFeatures(this, 'public', 'user-feature-navigation1')">public</span> <span class="public" id="tagsum-public">11</span> <span id="user-feature-navigation1" data-tags="unimplemented protected private public"><span class="tag arrow" onclick="navigateTag(this.parentNode, -1)">◂</span><span class="tag arrow" onclick="navigateTag(this.parentNode, 1)">▸</span> <span class="statistics"><span class="current">1</span>/<span class="sum"></span>+<span class="excluded"></span></span> </span></span> <span class="navigation"><span class="tag singleton" onclick="toggleFeatures(this, 'singleton', 'user-feature-navigation2')">Singleton method</span> <span class="singleton" id="tagsum-singleton">3</span> <span class="tag instance" onclick="toggleFeatures(this, 'instance', 'user-feature-navigation2')">Instance method</span> <span class="instance" id="tagsum-instance">4</span> <span id="user-feature-navigation2" data-tags="constant singleton instance"><span class="tag arrow" onclick="navigateTag(this.parentNode, -1)">◂</span><span class="tag arrow" onclick="navigateTag(this.parentNode, 1)">▸</span> <span class="statistics"><span class="current">1</span>/<span class="sum"></span>+<span class="excluded"></span></span> </span></span></div><div id="top-title">“dom” User&apos;s Manual</div><div id="main" onmouseover="this.focus()" onmouseout="this.blur()" tabindex="0"><div class="module"><div class="feature"><div></div><div class="feature-contents"></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature2">1. License</h2><div class="feature-contents"><div class="user-item"><div class="p">The MIT License (MIT)</div><div class="p">Copyright (c) 2013-2016 sawa</div><div class="p">Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the &quot;Software&quot;), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</div><div class="p">The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</div><div class="p">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</div></div></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature3">2. Overview</h2><div class="feature-contents"><div class="user-item"><div class="p">Dom gem is a library to generate HTML or XML code from Ruby commands. It replaces the conventional approach that uses template engines and conventional Ruby libraries used for generating HTML or XML strings.</div><div class="p">Here are some problems with the conventional tools:</div><div class="p">1. With template engines, you need to write the HTML or XML code in a language different from the language used for the program (Ruby), and you need to write it either in a file distinct from the Ruby program, or as a here document in the Ruby program.</div><div class="p">2. Some conventional Ruby libraries use commands that are named after the type of the DOM node. Notations with such libraries may look like:</div><div class="CodeRay">
  <div class="code"><pre>h1{<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>} <span class="comment"># =&gt; &quot;&lt;h1&gt;Hello World!&lt;/h1&gt;&quot;</span>
div{<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>} <span class="comment"># =&gt; &quot;&lt;div&gt;Hello World!&lt;/div&gt;&quot;</span>
</pre></div>
</div>
<div class="p">This approach is not flexible; for every type of node, the corresponding command needs to be defined in advance in the library to be usable. A user would not be able to use an original node type that is not predefined in the library.</div><div class="p">3. Some conventional Ruby libraries accept the content of a node as a block. Nested nodes would then require nested blocks:</div><div class="CodeRay">
  <div class="code"><pre>div{p{span{<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>}}}
<span class="comment"># =&gt; &quot;&lt;div&gt;&lt;p&gt;&lt;span&gt;Hello World!&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&quot;</span>
</pre></div>
</div>
<div class="p">As the structure becomes complicated, it becomes more difficult to keep track of paring between the opening and the closing of the blocks.</div><div class="p">Dom gem solves these problems that the conventional tools have. In particular,</div><div class="p">1. With Dom gem, you can describe HTML and XML structures in Ruby language seamlessly with other parts of Ruby code.</div><div class="p">2. Dom gem uses a fixed method name <code class="inline">dom</code>, which takes a symbol argument that represents the node type. The equivalent of the first sample above in dom would be:</div><div class="CodeRay">
  <div class="code"><pre><span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:h1</span>) <span class="comment"># =&gt; &quot;&lt;h1&gt;Hello World!&lt;/h1&gt;&quot;</span>
<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:div</span>) <span class="comment"># =&gt; &quot;&lt;div&gt;Hello World!&lt;/div&gt;&quot;</span>
</pre></div>
</div>
<div class="p">3. In dom, the content of a node is the receiver of the method <code class="inline">dom</code>. Node embedding is described as method chaining. This avoids unnecessary nesting, and confirms to the Rubyistic coding style. The equivalent of the second sample above in dom would be:</div><div class="CodeRay">
  <div class="code"><pre><span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>).dom(<span class="symbol">:p</span>).dom(<span class="symbol">:div</span>)
<span class="comment"># =&gt; &quot;&lt;div&gt;&lt;p&gt;&lt;span&gt;Hello World!&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&quot;</span>
</pre></div>
</div>
</div></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature4">3. Usage</h2><div class="feature-contents"><div class="user-item"><div class="p">Require dom:</div><div class="CodeRay">
  <div class="code"><pre>require <span class="string"><span class="delimiter">&quot;</span><span class="content">dom</span><span class="delimiter">&quot;</span></span>
</pre></div>
</div>
<div class="p">To surround a string with a tag, use the <code class="inline">dom</code> method. Pass the tag name as a symbol, with an optional hash, whose keys are symbols, and values that are either <code class="inline">nil</code>, <code class="inline">true</code>, <code class="inline">false</code>, or other kinds of objects that have the <code class="inline">to_s</code> methods implemented.</div><div class="CodeRay">
  <div class="code"><pre><span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>)
<span class="comment"># =&gt; &quot;&lt;span class=\&quot;bar\&quot;&gt;foo&lt;/span&gt;&quot;</span>

<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>, <span class="key">data_1</span>: <span class="predefined-constant">nil</span>, <span class="key">data_2</span>: <span class="integer">3</span>)
<span class="comment"># =&gt; &quot;&lt;span data-2=\&quot;3\&quot;&gt;foo&lt;/span&gt;&quot;</span>
</pre></div>
</div>
<div class="p">The <code class="inline">dom</code> method can be chained to generate nested structures.</div><div class="CodeRay">
  <div class="code"><pre><span class="string"><span class="delimiter">&quot;</span><span class="content">Hello World!</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>).dom(<span class="symbol">:p</span>).dom(<span class="symbol">:div</span>)
<span class="comment"># =&gt; &quot;&lt;div&gt;&lt;p&gt;&lt;span&gt;Hello World!&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&quot;</span>
</pre></div>
</div>
<div class="p">When <code class="inline">dom</code> applies to an array, its elements are joined.</div><div class="CodeRay">
  <div class="code"><pre>[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>].dom(<span class="symbol">:div</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>)
<span class="comment"># =&gt; &quot;&lt;div class=\&quot;bar\&quot;&gt;foobar&lt;/div&gt;&quot;</span>
</pre></div>
</div>
<div class="p">When multiple tags are passed to a single <code class="inline">dom</code> method call, the tags are distributed and are percolated into the nested arrays.</div><div class="CodeRay">
  <div class="code"><pre>[[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">foo2</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">bar1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bar2</span><span class="delimiter">&quot;</span></span>]].dom(<span class="symbol">:td</span>, <span class="symbol">:tr</span>, <span class="symbol">:table</span>)
<span class="comment"># =&gt; &quot;&lt;table&gt;&lt;tr&gt;&lt;td&gt;foo1&lt;/td&gt;&lt;td&gt;foo2&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;bar1&lt;/td&gt;&lt;td&gt;bar2&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>
</pre></div>
</div>
</div></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature5">4. Contribution</h2><div class="feature-contents"><div class="user-item"><div class="p">To access to the source code or to contribute, please access <a href="https://github.com/sawa/dom">https://github.com/sawa/dom</a>.</div><div class="p">The developer information of Dom gem is available at <a href="http://www.rubymanager.com/rubydom/CHART.html">http://www.rubymanager.com/rubydom/CHART.html</a>.</div></div></div></div></div><div class="module"><div class="feature" onclick="toggleModuleContents(this)"><h1 class="module-header" id="feature6"><span class="anchor" id="public1"><span class="tag public">public</span></span> module <span class="feature-name">Dom</span></h1><div class="feature-contents"></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature9"><span class="anchor" id="public2"><span class="tag public">public</span></span> <span class="anchor" id="singleton1"><span class="tag singleton">1</span></span> Dom.<span class="feature-name">compact</span></h2><div class="feature-contents"><div class="user-item"><span class="head">Usage</span> <code class="inline">()</code> → <code class="inline">nil</code><div class="p">Sets the output to compact mode. This is usually the best for production use. It is compressed, and is not convenient for human reading. This is the default mode.</div></div><div class="user-item"><div class="CodeRay">
  <div class="code"><pre><span class="constant">Dom</span>.compact
[[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">foo2</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">bar1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bar2</span><span class="delimiter">&quot;</span></span>]].dom(<span class="symbol">:td</span>, <span class="symbol">:tr</span>)
<span class="comment"># =&gt; &quot;&lt;tr&gt;&lt;td&gt;foo1foo2&lt;/td&gt;&lt;td&gt;bar1bar2&lt;/td&gt;&lt;/tr&gt;&quot;</span>
</pre></div>
</div>
</div></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature10"><span class="anchor" id="public3"><span class="tag public">public</span></span> <span class="anchor" id="singleton2"><span class="tag singleton">2</span></span> Dom.<span class="feature-name">nested</span></h2><div class="feature-contents"><div class="user-item"><span class="head">Usage</span> <code class="inline">()</code> → <code class="inline">nil</code><div class="p">Sets the output to nested mode. This is usually the best for development use. It may not be optimized for production use.</div></div><div class="user-item"><div class="CodeRay">
  <div class="code"><pre><span class="constant">Dom</span>.nested
[[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">foo2</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">bar1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bar2</span><span class="delimiter">&quot;</span></span>]].dom(<span class="symbol">:td</span>, <span class="symbol">:tr</span>)
<span class="comment"># =&gt; &quot;&lt;tr&gt;\n  &lt;td&gt;\n    foo1\n    foo2\n  &lt;/td&gt;\n  &lt;td&gt;\n    bar1\n    bar2\n  &lt;/td&gt;\n&lt;/tr&gt;&quot;</span>
</pre></div>
</div>
</div></div></div></div><div class="module"><div class="feature" onclick="toggleModuleContents(this)"><h1 class="module-header" id="feature19"><span class="anchor" id="public4"><span class="tag public">public</span></span> class <span class="feature-name">String</span></h1><div class="feature-contents"></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature20"><span class="anchor" id="public5"><span class="tag public">public</span></span> <span class="anchor" id="instance1"><span class="tag instance">1</span></span> String#<span class="feature-name">dom</span></h2><div class="feature-contents"><div class="user-item"><span class="head">Usage</span> <code class="inline">(tag, mounted: nil, **attr)</code> → DomString<div class="p">When <code class="inline">dom</code> is called on a string, it will create a tag that includes the string as the content.</div><div class="CodeRay">
  <div class="code"><pre><span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>)
<span class="comment"># =&gt; &quot;&lt;span class=\&quot;bar\&quot;&gt;foo&lt;/span&gt;&quot;</span>
</pre></div>
</div>
</div><div class="user-item"><div class="p">Attributes should be passed as a hash. A key <code class="inline">:foo</code> with value <code class="inline">true</code> or <code class="inline">false</code> will be converted to the string <code class="inline">foo=&quot;&quot;</code> or <code class="inline">foo=&quot;none&quot;</code>, respectively. Key-value pairs with the value <code class="inline">nil</code> will be excluded from the output. For other values, <code class="inline">to_s</code> will be applied.</div><div class="CodeRay">
  <div class="code"><pre><span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>, <span class="key">data_1</span>: <span class="predefined-constant">nil</span>, <span class="key">data_2</span>: <span class="integer">3</span>)
<span class="comment"># =&gt; &quot;&lt;span data-2=\&quot;3\&quot;&gt;foo&lt;/span&gt;&quot;</span>
</pre></div>
</div>
</div><div class="user-item"><div class="p">HTML escaping will be automatically applied unless the <code class="inline">tag</code> is <code class="inline">:script</code> or <code class="inline">:style</code>:</div><div class="CodeRay">
  <div class="code"><pre><span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>)
<span class="comment"># =&gt; &quot;&lt;span&gt;&amp;lt;&lt;/span&gt;&quot;</span>

<span class="string"><span class="delimiter">&quot;</span><span class="content">if(3 &lt; 5){alert('foo')};</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:script</span>)
<span class="comment"># =&gt; &quot;&lt;script&gt;if(3 &lt; 5){alert('foo')};&lt;/script&gt;&quot;</span>
</pre></div>
</div>
</div></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature22"><span class="anchor" id="public6"><span class="tag public">public</span></span> <span class="anchor" id="instance2"><span class="tag instance">2</span></span> String#<span class="feature-name">dom_escaped</span></h2><div class="feature-contents"><div class="user-item"><span class="head">Usage</span> <code class="inline">()</code> → DomString<div class="p">Marks <code class="inline">self</code> so that it will not be further HTML escaped. Internally, it is converted to an instance of <code class="inline">DomString</code> class, which is never further escaped.</div><div class="p">When a string is already HTML escaped but has not been done so via the <code class="inline">dom</code> method, further applying <code class="inline">dom</code> to that string without applying <code class="inline">dom_escaped</code> will incorrectly doubly apply HTML escaping:</div><div class="CodeRay">
  <div class="code"><pre><span class="string"><span class="delimiter">&quot;</span><span class="content">3 &amp;lt; 5</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>)
<span class="comment"># =&gt; &quot;&lt;span&gt;3 &amp;amp;lt; 5&lt;/span&gt;&quot;</span>

[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bold</span><span class="delimiter">&quot;</span></span>), <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bold</span><span class="delimiter">&quot;</span></span>)].join(<span class="string"><span class="delimiter">&quot;</span><span class="content">, </span><span class="delimiter">&quot;</span></span>).dom(<span class="symbol">:span</span>)
<span class="comment"># =&gt; &quot;&lt;span&gt;&amp;lt;span class=&amp;quot;bold&amp;quot;&amp;gt;foo&amp;lt;/span&amp;gt;, &amp;lt;span class=&amp;quot;bold&amp;quot;&amp;gt;bar&amp;lt;/span&amp;gt;&lt;/span&gt;&quot;</span>
</pre></div>
</div>
<div class="p">To get the correct results, <code class="inline">dom_escaped</code> must be applied before <code class="inline">dom</code>:</div><div class="CodeRay">
  <div class="code"><pre><span class="string"><span class="delimiter">&quot;</span><span class="content">3 &amp;lt; 5</span><span class="delimiter">&quot;</span></span>.dom_escaped.dom(<span class="symbol">:span</span>)
<span class="comment"># =&gt; &quot;&lt;span&gt;3 &amp;lt; 5&lt;/span&gt;&quot;</span>

[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bold</span><span class="delimiter">&quot;</span></span>), <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bold</span><span class="delimiter">&quot;</span></span>)].join(<span class="string"><span class="delimiter">&quot;</span><span class="content">, </span><span class="delimiter">&quot;</span></span>).dom_escaped.dom(<span class="symbol">:span</span>)
<span class="comment"># =&gt; &quot;&lt;span&gt;&lt;span class=\&quot;bold\&quot;&gt;foo&lt;/span&gt;, &lt;span class=\&quot;bold\&quot;&gt;bar&lt;/span&gt;&lt;/span&gt;&quot;</span>
</pre></div>
</div>
</div><div class="user-item"><div class="p">When the string is created by <code class="inline">dom</code> method, such consideration is unnecessary (although it will not harm if <code class="inline">dom_escaped</code> is redundantly applied).</div><div class="CodeRay">
  <div class="code"><pre>[<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>.dom(<span class="symbol">:span</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bold</span><span class="delimiter">&quot;</span></span>), <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>].dom.dom
<span class="comment"># =&gt; &quot;&lt;span class=\&quot;bold\&quot;&gt;a&lt;/span&gt;b&quot;</span>
</pre></div>
</div>
</div></div></div></div><div class="module"><div class="feature" onclick="toggleModuleContents(this)"><h1 class="module-header" id="feature32"><span class="anchor" id="public7"><span class="tag public">public</span></span> module <span class="feature-name">Kernel</span></h1><div class="feature-contents"></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature33"><span class="anchor" id="private1"><span class="tag private">private</span></span> <span class="anchor" id="instance3"><span class="tag instance">3</span></span> Kernel#<span class="feature-name">dom</span></h2><div class="feature-contents"><div class="user-item"><span class="head">Usage</span> <code class="inline">(tag, mounted: nil, **attr)</code> → DomString<div class="p">When <code class="inline">dom</code> is used without an explicit receiver, it will create a self-closing tag.</div><div class="CodeRay">
  <div class="code"><pre>dom(<span class="symbol">:img</span>, <span class="key">source</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">/tmp/foo.png</span><span class="delimiter">&quot;</span></span>)
<span class="comment"># =&gt; &quot;&lt;img source=\&quot;/tmp/foo.png\&quot; /&gt;&quot;</span>
</pre></div>
</div>
<div class="p">In the following example, <code class="inline">Kernel#dom</code> is called at the embedded level. See <code class="inline">Array#dom</code>.</div><div class="CodeRay">
  <div class="code"><pre><span class="constant">Array</span>.new(<span class="integer">3</span>).dom(<span class="symbol">:col</span>, <span class="symbol">:colgroup</span>)
<span class="comment"># =&gt; &quot;&lt;colgroup&gt;&lt;col /&gt;&lt;col /&gt;&lt;col /&gt;&lt;/colgroup&gt;&quot;</span>
</pre></div>
</div>
</div></div></div></div><div class="module"><div class="feature" onclick="toggleModuleContents(this)"><h1 class="module-header" id="feature37"><span class="anchor" id="public8"><span class="tag public">public</span></span> class <span class="feature-name">Array</span></h1><div class="feature-contents"></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature38"><span class="anchor" id="public9"><span class="tag public">public</span></span> <span class="anchor" id="instance4"><span class="tag instance">4</span></span> Array#<span class="feature-name">dom</span></h2><div class="feature-contents"><div class="user-item"><span class="head">Usage</span> <code class="inline">(tag, mounted: nil, **attr)</code> → DomString<div class="p">Concatenates the elements and puts them inside the tag.</div><div class="CodeRay">
  <div class="code"><pre>[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>].dom(<span class="symbol">:div</span>, <span class="key">class</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>)
<span class="comment"># =&gt; &quot;&lt;div class=\&quot;bar\&quot;&gt;foobar&lt;/div&gt;&quot;</span>
</pre></div>
</div>
</div><div class="user-item"><span class="head">Usage</span> <code class="inline">()</code> → DomString<div class="p">When no argument is given or an explicit <code class="inline">nil</code> is given, it joins its elements.</div><div class="CodeRay">
  <div class="code"><pre>[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>].dom
<span class="comment"># =&gt; &quot;foobar&quot;,</span>

[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bar</span><span class="delimiter">&quot;</span></span>].dom(<span class="predefined-constant">nil</span>)
<span class="comment"># =&gt; &quot;foobar&quot;,</span>
</pre></div>
</div>
</div><div class="user-item"><span class="head">Usage</span> <code class="inline">(*tags, mounted: nil, **attr)</code> → DomString<div class="p">When more than one tag is provided, it applies <code class="inline">dom</code> to each of its elements with the tags passed except for the last tag (with no other parameters). The last tag and the other parameters are used to apply <code class="inline">dom</code> to the result.</div><div class="CodeRay">
  <div class="code"><pre>[[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">foo2</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">bar1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bar2</span><span class="delimiter">&quot;</span></span>]].dom(<span class="symbol">:td</span>, <span class="symbol">:tr</span>, <span class="symbol">:table</span>)
<span class="comment"># =&gt; &quot;&lt;table&gt;&lt;tr&gt;&lt;td&gt;foo1&lt;/td&gt;&lt;td&gt;foo2&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;bar1&lt;/td&gt;&lt;td&gt;bar2&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span>

<span class="constant">Array</span>.new(<span class="integer">3</span>).dom(<span class="symbol">:col</span>, <span class="symbol">:colgroup</span>)
<span class="comment"># =&gt; &quot;&lt;colgroup&gt;&lt;col /&gt;&lt;col /&gt;&lt;col /&gt;&lt;/colgroup&gt;&quot;</span>

[[[<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>], <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>], <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>].dom(<span class="symbol">:bar</span>, <span class="symbol">:foo</span>)
<span class="comment"># =&gt; &quot;&lt;foo&gt;&lt;bar&gt;abc&lt;/bar&gt;&lt;bar&gt;d&lt;/bar&gt;&lt;/foo&gt;&quot;</span>
</pre></div>
</div>
</div><div class="user-item"><div class="p">The array must be at least as deep as the number of tags, and the elements at that level must all be strings or arrays.</div><div class="CodeRay">
  <div class="code"><pre>[<span class="string"><span class="delimiter">&quot;</span><span class="content">x</span><span class="delimiter">&quot;</span></span>].dom(<span class="symbol">:a</span>, <span class="symbol">:b</span>, <span class="symbol">:c</span>, <span class="symbol">:d</span>)
<span class="comment"># =&gt; ArgumentError</span>

[[<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="integer">1</span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>]].dom(<span class="symbol">:td</span>, <span class="symbol">:tr</span>)
<span class="comment"># =&gt; ArgumentError</span>
</pre></div>
</div>
</div><div class="user-item"><div class="p">Passing <code class="inline">nil</code> as the last argument:</div><div class="CodeRay">
  <div class="code"><pre>[[<span class="string"><span class="delimiter">&quot;</span><span class="content">foo1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">foo2</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">bar1</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bar2</span><span class="delimiter">&quot;</span></span>]].dom(<span class="symbol">:td</span>, <span class="symbol">:tr</span>, <span class="predefined-constant">nil</span>)
<span class="comment"># =&gt; &quot;&lt;tr&gt;&lt;td&gt;foo1&lt;/td&gt;&lt;td&gt;foo2&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;bar1&lt;/td&gt;&lt;td&gt;bar2&lt;/td&gt;&lt;/tr&gt;&quot;</span>

[[<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>]].dom(<span class="symbol">:div</span>, <span class="predefined-constant">nil</span>, <span class="predefined-constant">nil</span>)
<span class="comment"># =&gt; &quot;&lt;div&gt;a&lt;/div&gt;&lt;div&gt;b&lt;/div&gt;&lt;div&gt;c&lt;/div&gt;&lt;div&gt;d&lt;/div&gt;&quot;</span>

[[<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>]].dom(<span class="symbol">:div</span>, <span class="predefined-constant">nil</span>)
<span class="comment"># =&gt; &quot;&lt;div&gt;ab&lt;/div&gt;&lt;div&gt;cd&lt;/div&gt;&quot;</span>
</pre></div>
</div>
</div><div class="user-item"><div class="p">Cf.</div><div class="CodeRay">
  <div class="code"><pre>[[<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>]].dom(<span class="predefined-constant">nil</span>, <span class="symbol">:div</span>)
<span class="comment"># =&gt; &quot;&lt;div&gt;abcd&lt;/div&gt;&quot;</span>
</pre></div>
</div>
</div><div class="user-item"><span class="head">Usage</span> <code class="inline">(*tags, mounted: nil, **attr, &amp;pr)</code> → DomString<div class="p">When a block is passed, the block is applied to the array at the depth depending on the class of the receiver that corresponds to the inner most tag.</div><div class="p">When the receiver that corresponds to the innermost tag is a string, the block is applied to it.</div><div class="CodeRay">
  <div class="code"><pre>[[<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>]].dom(<span class="symbol">:td</span>, <span class="symbol">:tr</span>, <span class="symbol">:tbody</span>){|e| e * <span class="integer">2</span>} 
<span class="comment"># =&gt; &quot;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;aa&lt;/td&gt;&lt;td&gt;bb&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;cc&lt;/td&gt;&lt;td&gt;dd&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&quot;</span>
</pre></div>
</div>
</div><div class="user-item"><div class="p">When the receiver that corresponds to the innermost tag is an array, the block is applied to each of its elements.</div><div class="CodeRay">
  <div class="code"><pre>[<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>].dom(<span class="symbol">:foo</span>){|e| e * <span class="integer">2</span>}
<span class="comment"># =&gt; &quot;&lt;foo&gt;aabb&lt;/foo&gt;&quot;</span>

[[<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>], [<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>]].dom(<span class="symbol">:bar</span>, <span class="symbol">:foo</span>){|e| e * <span class="integer">2</span>}
<span class="comment"># =&gt; &quot;&lt;foo&gt;&lt;bar&gt;aabb&lt;/bar&gt;&lt;bar&gt;ccdd&lt;/bar&gt;&lt;/foo&gt;&quot;</span>
</pre></div>
</div>
</div></div></div></div><div class="module"><div class="feature" onclick="toggleModuleContents(this)"><h1 class="module-header" id="feature40"><span class="anchor" id="public10"><span class="tag public">public</span></span> class <span class="feature-name">File</span></h1><div class="feature-contents"></div></div><div class="feature" onclick="toggleFeatureContents(this)"><h2 id="feature41"><span class="anchor" id="public11"><span class="tag public">public</span></span> <span class="anchor" id="singleton3"><span class="tag singleton">3</span></span> File.<span class="feature-name">relativize</span></h2><div class="feature-contents"><div class="user-item"><span class="head">Usage</span> <code class="inline">(string)</code> → String<div class="p">Removes the initial slash if an absolute path is given. If a relative path is given, it has no effect.</div><div class="CodeRay">
  <div class="code"><pre><span class="constant">File</span>.relativize(<span class="string"><span class="delimiter">&quot;</span><span class="content">/foo/bar/baz</span><span class="delimiter">&quot;</span></span>)
<span class="comment"># =&gt; &quot;foo/bar/baz&quot;</span>

<span class="constant">File</span>.relativize(<span class="string"><span class="delimiter">&quot;</span><span class="content">foo/bar/baz</span><span class="delimiter">&quot;</span></span>)
<span class="comment"># =&gt; &quot;foo/bar/baz&quot;</span>

dom(<span class="symbol">:img</span>, <span class="key">src</span>: <span class="constant">File</span>.relativize(<span class="string"><span class="delimiter">&quot;</span><span class="content">/foo/resource/picture.png</span><span class="delimiter">&quot;</span></span>))
<span class="comment"># =&gt; &quot;&lt;img src=\&quot;foo/resource/picture.png\&quot; /&gt;&quot;</span>
</pre></div>
</div>
</div></div></div></div></div></div><script>//-*-mode: javascript-*-

// Copyright (c) 2014-2016 sawa

var main;
var scrollMargin;

// Scroll to the anchor.
window.onhashchange = function(e) {
//	location.href = location.hash;
//	main.scrollTop -= main.offsetHeight * 0.5 + scrollMargin;
	main.scrollTop -= scrollMargin;
};

document.body.onload = function() {
	main = document.getElementById('main');
	//This line is needed to invoke `window.onhashchange` even when `location.hash`
	//  is the same as the previous load.
	location.hash = '';
	//TODO. Import data from webstore.
	//location.hash =
	var joinQuery = function(obj, prefix, affix){
		return prefix + obj.dataset.tags.split(' ').join(affix + ', ' + prefix) + affix;
	}
	var tagsumPrefix = '#tagsum-', tagsumAffix = ':not([style="opacity: 0.2;"])';
	var i, obj, query;
	query = '.feature:not([style="display: none;"]) .tag.';
	for(i = 1; obj = document.getElementById('user-feature-navigation' + i); i++) {
		obj.query = joinQuery(obj, query, '');
		obj.tagsums = joinQuery(obj, tagsumPrefix, tagsumAffix);
		initializeNavigation(obj);
	}
	for(i = 1; obj = document.getElementById('dev-feature-navigation' + i); i++) {
		obj.query = joinQuery(obj, query, '');
		obj.tagsums = joinQuery(obj, tagsumPrefix, tagsumAffix);
		initializeNavigation(obj);
	}
	query = '\
	.feature:not([style="display: none;"]):not([folded="true"]) \
	.feature-contents > :not([style="display: none;"]) \
	.anchor:not([style="display: none;"]) \
	.tag.';
	for(i = 1; obj = document.getElementById('anchor-navigation' + i); i++) {
		obj.query = joinQuery(obj, query, '');
		obj.tagsums = joinQuery(obj, tagsumPrefix, tagsumAffix);
		initializeNavigation(obj);
	}
	var objs = document.getElementsByClassName('feature');
	for(var i = 0; i < objs.length; i++) {
		// TODO. copy from webstore if any.
		objs[i].hiddenFor = {};
//		hide(objs[i], Object.keys(objs[i].hiddenFor).length);
	}
	switch(document.body.id){
		case 'user':
			scrollMargin = 200;
			// Click "Features" button.
			document.getElementById('top').children[0].children[1].onclick();
		break;
		case 'dev':
			// Approximates half of line height from experience. TODO: Do it logically.
			scrollMargin = 200;
			// Click "Full" button. (Neccessary to do this also for adding `folded` attribute)
			document.getElementById('top').children[0].children[2].onclick();
		break;
	}
	// Prevents feature toggling.
	// Overwriting `onclick` does not interfere with linking to `href`; it is different from `onclick`.
	var objs = document.getElementsByTagName('a');
	for(var i = 0; i < objs.length; i++) objs[i].onclick = function(e) {e.stopPropagation();};
};

initializeNavigation = function(obj) {
	obj.features = document.querySelectorAll(obj.query);
	var sum = obj.features.length;
	obj.querySelector('.sum').innerText = sum;
	var excluded = -sum;
	var objs = document.querySelectorAll(obj.tagsums);
	for(var i = 0; i < objs.length; i++) excluded += parseInt(objs[i].innerText);
	obj.querySelector('.excluded').innerText = excluded;
	var current = obj.querySelector('.current');
	if(sum == 0) {
		current.innerText = 1;
	} else {if(parseInt(current.innerText) > sum
		) current.innerText = sum;
	};
};

initializeNavigations = function() {
	for(var i = 1, obj; obj = document.getElementById('user-feature-navigation' + i); i++
	) initializeNavigation(obj);
	for(var i = 1, obj; obj = document.getElementById('dev-feature-navigation' + i); i++
	) initializeNavigation(obj);
	for(var i = 1, obj; obj = document.getElementById('anchor-navigation' + i); i++
	) initializeNavigation(obj);
};

getFeatureNodeFromId = function(id) {
	var obj = document.getElementById(id);
	if(!obj) return null;
	while(true) {
		if(obj.className == 'feature') return obj;
		obj = obj.parentNode;
		if(!obj) return null;
	}
};

getIdFromObj = function(obj) {
	while(true) {
		if(obj.id) return obj.id;
		obj = obj.parentNode;
		if(!obj) return null;
	}
};

hide = function(obj, bool) {obj.style.display = bool ? 'none' : null;};

inactivate = function(obj, bool) {obj.style.opacity = bool ? 0.2 : null;};

mark = function(obj, bool) {return obj.marking = bool;};

toggleMarking = function(obj) {return obj.marking = !obj.marking;};

hideByTag = function(obj, tag, bool) {
	if(bool) {obj.hiddenFor[tag] = true;} else {delete obj.hiddenFor[tag];};
	hide(obj, Object.keys(obj.hiddenFor).length);
};

foldModuleContents = function(obj, bool){
	obj.firstChild.setAttribute('folded', bool);
	var objs = obj.childNodes;
	foldFeatureContents(objs[0], bool);
	// From the second children.
	for (var i = 1; i < objs.length; i++) hideByTag(objs[i], 'folded', bool);
	return bool;
};

foldFeatureContents = function(obj, bool){
	obj.setAttribute('folded', bool);
	hide(obj.firstChild.nextSibling, bool);
	return bool;
};

displayMode = function(bool1, bool2) {
	var objs = document.getElementsByClassName('module');
	for(var i = 0; i < objs.length; i++) foldModuleContents(objs[i], mark(objs[i], bool1));
	// `[onclick]`: Features with `type` `:module_as_constant` are not clickable.
	// `:not(:first-child)`: Don't fold module headers here.
	var objs = document.querySelectorAll('.feature[onclick]:not(:first-child)');
	for(var i = 0; i < objs.length; i++) foldFeatureContents(objs[i], mark(objs[i], bool2));
	initializeNavigations();
};

toggleModuleContents = function(feature) {
	var module = feature.parentNode;
	var bool = foldModuleContents(module, toggleMarking(module));
	if(bool) {
		module.scrollIntoView();	
		window.onhashchange();
	}
	initializeNavigations();
};

toggleFeatureContents = function(feature) {
	var bool = foldFeatureContents(feature, toggleMarking(feature));
	if(bool) {
		feature.scrollIntoView();	
		window.onhashchange();
	}
	initializeNavigations();
};

toggleUserItems = function(button) {
	// recordScrollPosition();
	var bool = toggleMarking(button);
	inactivate(button, bool);
	objs = document.getElementsByClassName('user-item');
	for(i = 0; i < objs.length; i++) hide(objs[i], bool);
	initializeNavigations();
	// resumeScrollPosition();
};

toggleFeatures = function(button, tag, navigation) {
	// recordScrollPosition();
	var bool = toggleMarking(button);
	inactivate(button, bool);
	inactivate(document.getElementById('tagsum-' + tag), bool);
	for(var i = 1, obj; obj = getFeatureNodeFromId(tag + i); i ++) hideByTag(obj, tag, bool);
	navigation = document.getElementById(navigation);
	initializeNavigations();
	// resumeScrollPosition();
};

toggleAnchors = function(button, tag, navigation) {
	// recordScrollPosition();
	var bool = toggleMarking(button);
	inactivate(button, bool);
	inactivate(document.getElementById('tagsum-' + tag), bool);
	for(var i = 1, obj; obj = document.getElementById(tag + i); i ++) hide(obj, bool);
	navigation = document.getElementById(navigation);
	initializeNavigation(navigation);
	// resumeScrollPosition();
};

navigateTag = function(navigation, d) {
	var n = navigation.features.length;
	if(n == 0) return;
	var old = document.getElementById('current');
	if(old) old.removeAttribute('id');
	var current = navigation.querySelector('.current');
	current.id = 'current';
	var i = parseInt(current.innerText) + d;
	if(i < 1) i = 1;
	if(i > n) i = n;
	current.innerText = i;
	location.hash = getIdFromObj(navigation.features[i - 1]);
};

//var lastToggled =
//var lastViewPort =
recordScrollPosition = function() {
//	main.scrollTop = navigation.features[i - 1].offsetTop - main.offsetTop;
/*
foo = function(obj) {
	var ref =  window.scrollY - window.pageYOffset + document.documentElement.clientTop;
	var checkChildDivs = function() {
		var children = obj.childNodes;
		if (children.length) {[].forEach.call(children, function(e, i, a) {
			if (e.toString() === "[object HTMLDivElement]") {
				// the top of the div relative to the document
				// minus the height of window hidden above the top of the screen
				var top = e.getBoundingClientRect().top;
				// top and bottom posns relative to the top of the screen
				// the top and bottom distances of the element relative to the top of the screen
				// the div overlaps the screen top
				if ((top <= ref) && (ref <= top + e.offsetHeight)) {
					obj = e;
					checkChildDivs();
					return false;
				}
			}
		});}
	};
	checkChildDivs();
	return obj;
};
*/
};

resumeScrollPosition = function() {
};

coverage = function(obj){
	alert("Sorry, this function is not implemented.");
//	alert(obj.nextSibling.contentDocument.querySelector('body').innerText);
//	var f = obj.dataset.file;
};
</script></body></html>